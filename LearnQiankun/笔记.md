## 基础使用

### 主应用
使用`registerMicroApps`方法注册微应用，当`activeRule`匹配时，从`entry`加载，插入指定的container，并执行微应用暴露的生命周期钩子。

如果微应用不与路由关联，也可以使用`loadMicroApp`方法手动加载微应用。

### 微应用
配置 webpack output 选项，打包成umd。
```javascript
module.exports = {
  output: {
    libraryTarget: 'umd',
    library: `some`,
  },
};
```

导出bootstrap、mount、unmount、update等钩子。

#### 微应用的public path
要注意子应用用于动态加载的 public path，因为路径会相对于主应用的路径，所以要适当调整。（用script标签加载的并不会有问题，qiankun对其进行了处理）

可以在入口文件最顶部进行[运行时 public path 配置](https://webpack.docschina.org/guides/public-path/#on-the-fly)
```javascript
if (window.__POWERED_BY_QIANKUN__) {
  // window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__ 是qiankun注入的微应用根路径
  __webpack_public_path__ = window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__;
}
```

#### 微应用路由base
可在子应用中配置路由base，与主应用的activeRule配置一致。

#### 微应用环境判断
作为微应用的应用可获取到`window.__POWERED_BY_QIANKUN__`值。可利用其进行微应用单独运行，设置route base，设置public path等操作。

## 注意事项

### 本地开发跨域
需要在微应用的devServer配置
```javascript
{
  headers: {
    'Access-Control-Allow-Origin': '*',
  }
}
```

